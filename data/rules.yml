version: "3.1"

rules:

- rule: Detect language first
  steps:
  - intent: greet
  - action: action_detect_language
  - action: action_translate_and_respond
  - action: utter_ask_state

- rule: Register complaint flow
  steps:
  - intent: provide_state
    entities:
    - state
  - slot_was_set:
    - state
  - action: utter_ask_area

- rule: Ask for area
  steps:
  - intent: provide_area
    entities:
    - area
  - slot_was_set:
    - area
  - action: utter_ask_department

- rule: Ask for department
  steps:
  - intent: provide_department
    entities:
    - department
  - slot_was_set:
    - department
  - action: utter_ask_complaint_details
- rule: Ask for complaint details
  steps:
  - intent: provide_complaint_details
    entities:
    - complaint_details
  - slot_was_set:
    - complaint_details
  - action: action_generate_draft
  - action: utter_ask_confirmation

- rule: Confirm complaint submission
  steps:
  - intent: confirm
  - action: action_submit_complaint

- rule: Thank user after complaint submission
  steps:
  - intent: thank_you
  - action: utter_thank_you

- rule: Say goodbye anytime the user says goodbye
  steps:
  - intent: goodbye
  - action: utter_goodbye
