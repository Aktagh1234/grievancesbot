version: "3.1"

rules:

- rule: Start conversation and detect language
  steps:
    - intent: greet
    - action: action_set_email_slot
    - action: action_detect_language
    - action: utter_greet
    - action: utter_ask_state

- rule: Handle state input
  steps:
    - intent: provide_state
    - slot_was_set:
        - state
    - action: utter_ask_area

- rule: Handle area input
  steps:
    - intent: provide_area
    - slot_was_set:
        - area
    - action: action_ask_department

- rule: Handle department input
  steps:
    - intent: provide_department
    - slot_was_set:
        - department
    - action: utter_ask_complaint_details

- rule: Generate draft and ask confirmation
  steps:
    - intent: provide_complaint_details
    - slot_was_set:
        - complaint_details
    - action: action_generate_draft
    - action: utter_ask_confirmation

- rule: Submit complaint after confirmation
  steps:
    - intent: confirm
    - action: action_submit_complaint
    - action: utter_thank_you
